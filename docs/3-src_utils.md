# Src Utils

[_Documentation generated by Documatic_](https://www.documatic.com)

<!---Documatic-section-Codebase Structure-start--->
## Codebase Structure

<!---Documatic-block-system_architecture-start--->
```mermaid
None
```
<!---Documatic-block-system_architecture-end--->

# #
<!---Documatic-section-Codebase Structure-end--->

<!---Documatic-section-src.utils.lower-start--->
## [src.utils.lower](3-src_utils.md#src.utils.lower)

<!---Documatic-section-lower-start--->
<!---Documatic-block-src.utils.lower-start--->
<details>
	<summary><code>src.utils.lower</code> code snippet</summary>

```python
def lower(text):
    return text.lower()
```
</details>
<!---Documatic-block-src.utils.lower-end--->
<!---Documatic-section-lower-end--->

# #
<!---Documatic-section-src.utils.lower-end--->

<!---Documatic-section-src.utils.remove_hashtags-start--->
## [src.utils.remove_hashtags](3-src_utils.md#src.utils.remove_hashtags)

<!---Documatic-section-remove_hashtags-start--->
<!---Documatic-block-src.utils.remove_hashtags-start--->
<details>
	<summary><code>src.utils.remove_hashtags</code> code snippet</summary>

```python
def remove_hashtags(text):
    clean_text = re.sub('#[A-Za-z0-9_]+', '', text)
    return clean_text
```
</details>
<!---Documatic-block-src.utils.remove_hashtags-end--->
<!---Documatic-section-remove_hashtags-end--->

# #
<!---Documatic-section-src.utils.remove_hashtags-end--->

<!---Documatic-section-src.utils.remove_user_mentions-start--->
## [src.utils.remove_user_mentions](3-src_utils.md#src.utils.remove_user_mentions)

<!---Documatic-section-remove_user_mentions-start--->
<!---Documatic-block-src.utils.remove_user_mentions-start--->
<details>
	<summary><code>src.utils.remove_user_mentions</code> code snippet</summary>

```python
def remove_user_mentions(text):
    clean_text = re.sub('@[A-Za-z0-9_]+', '', text)
    return clean_text
```
</details>
<!---Documatic-block-src.utils.remove_user_mentions-end--->
<!---Documatic-section-remove_user_mentions-end--->

# #
<!---Documatic-section-src.utils.remove_user_mentions-end--->

<!---Documatic-section-src.utils.remove_urls-start--->
## [src.utils.remove_urls](3-src_utils.md#src.utils.remove_urls)

<!---Documatic-section-remove_urls-start--->
<!---Documatic-block-src.utils.remove_urls-start--->
<details>
	<summary><code>src.utils.remove_urls</code> code snippet</summary>

```python
def remove_urls(text):
    clean_text = re.sub('^https?:\\/\\/.*[\\r\\n]*', '', text, flags=re.MULTILINE)
    return clean_text
```
</details>
<!---Documatic-block-src.utils.remove_urls-end--->
<!---Documatic-section-remove_urls-end--->

# #
<!---Documatic-section-src.utils.remove_urls-end--->

<!---Documatic-section-src.utils.process_text-start--->
## [src.utils.process_text](3-src_utils.md#src.utils.process_text)

<!---Documatic-section-process_text-start--->
<!---Documatic-block-src.utils.process_text-start--->
<details>
	<summary><code>src.utils.process_text</code> code snippet</summary>

```python
def process_text(steps, text):
    if steps is not None:
        for step in steps:
            text = preprocessing_setps[step](text)
    return text
```
</details>
<!---Documatic-block-src.utils.process_text-end--->
<!---Documatic-section-process_text-end--->

# #
<!---Documatic-section-src.utils.process_text-end--->

<!---Documatic-section-src.utils.get_evaluation-start--->
## [src.utils.get_evaluation](3-src_utils.md#src.utils.get_evaluation)

<!---Documatic-section-get_evaluation-start--->
<!---Documatic-block-src.utils.get_evaluation-start--->
<details>
	<summary><code>src.utils.get_evaluation</code> code snippet</summary>

```python
def get_evaluation(y_true, y_prob, list_metrics):
    y_pred = np.argmax(y_prob, -1)
    output = {}
    if 'accuracy' in list_metrics:
        output['accuracy'] = metrics.accuracy_score(y_true, y_pred)
    if 'f1' in list_metrics:
        output['f1'] = metrics.f1_score(y_true, y_pred, average='weighted')
    return output
```
</details>
<!---Documatic-block-src.utils.get_evaluation-end--->
<!---Documatic-section-get_evaluation-end--->

# #
<!---Documatic-section-src.utils.get_evaluation-end--->

<!---Documatic-section-src.utils.accuracy-start--->
## [src.utils.accuracy](3-src_utils.md#src.utils.accuracy)

<!---Documatic-section-accuracy-start--->
<!---Documatic-block-src.utils.accuracy-start--->
<details>
	<summary><code>src.utils.accuracy</code> code snippet</summary>

```python
def accuracy(output, target, topk=(1,)):
    maxk = max(topk)
    batch_size = target.size(0)
    (_, pred) = output.topk(maxk, 1, True, True)
    pred = pred.t()
    correct = pred.eq(target.view(1, -1).expand_as(pred))
    res = []
    for k in topk:
        correct_k = correct[:k].view(-1).float().sum(0)
        res.append(correct_k.mul_(100.0 / batch_size))
    return res
```
</details>
<!---Documatic-block-src.utils.accuracy-end--->
<!---Documatic-section-accuracy-end--->

# #
<!---Documatic-section-src.utils.accuracy-end--->

<!---Documatic-section-src.utils.preprocess_input-start--->
## [src.utils.preprocess_input](3-src_utils.md#src.utils.preprocess_input)

<!---Documatic-section-preprocess_input-start--->
<!---Documatic-block-src.utils.preprocess_input-start--->
<details>
	<summary><code>src.utils.preprocess_input</code> code snippet</summary>

```python
def preprocess_input(args):
    raw_text = args.text
    steps = args.steps
    for step in steps:
        raw_text = preprocessing_setps[step](raw_text)
    number_of_characters = args.number_of_characters + len(args.extra_characters)
    identity_mat = np.identity(number_of_characters)
    vocabulary = list(args.alphabet) + list(args.extra_characters)
    max_length = args.max_length
    processed_output = np.array([identity_mat[vocabulary.index(i)] for i in list(raw_text[::-1]) if i in vocabulary], dtype=np.float32)
    if len(processed_output) > max_length:
        processed_output = processed_output[:max_length]
    elif 0 < len(processed_output) < max_length:
        processed_output = np.concatenate((processed_output, np.zeros((max_length - len(processed_output), number_of_characters), dtype=np.float32)))
    elif len(processed_output) == 0:
        processed_output = np.zeros((max_length, number_of_characters), dtype=np.float32)
    return processed_output
```
</details>
<!---Documatic-block-src.utils.preprocess_input-end--->
<!---Documatic-section-preprocess_input-end--->

# #
<!---Documatic-section-src.utils.preprocess_input-end--->

<!---Documatic-section-src.utils.cyclical_lr-start--->
## [src.utils.cyclical_lr](3-src_utils.md#src.utils.cyclical_lr)

<!---Documatic-section-cyclical_lr-start--->
<!---Documatic-block-src.utils.cyclical_lr-start--->
<details>
	<summary><code>src.utils.cyclical_lr</code> code snippet</summary>

```python
def cyclical_lr(stepsize, min_lr=0.0017, max_lr=0.01):

    def scaler(x):
        return 1.0

    def lr_lambda(it):
        return min_lr + (max_lr - min_lr) * relative(it, stepsize)

    def relative(it, stepsize):
        cycle = math.floor(1 + it / (2 * stepsize))
        x = abs(it / stepsize - 2 * cycle + 1)
        return max(0, 1 - x) * scaler(cycle)
    return lr_lambda
```
</details>
<!---Documatic-block-src.utils.cyclical_lr-end--->
<!---Documatic-section-cyclical_lr-end--->

# #
<!---Documatic-section-src.utils.cyclical_lr-end--->

[_Documentation generated by Documatic_](https://www.documatic.com)